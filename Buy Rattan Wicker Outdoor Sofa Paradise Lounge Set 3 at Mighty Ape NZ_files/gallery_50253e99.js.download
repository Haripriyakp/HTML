MA.ImageGallery=function(selected){'use strict';var $imageGallery=$('div.image-gallery');var $mainCarousel=$imageGallery.find('> .main .owl-carousel');var $thumbnailsCarousel=$imageGallery.find('> .thumbnails .owl-carousel');var $thumbnailImages=$thumbnailsCarousel.find('img');var $selectedItem=$thumbnailsCarousel.find('img[data-image="'+selected+'"]');var selectedIndex=$thumbnailsCarousel.find('img').index($selectedItem);var $adultBadge=$('a.adult-badge');var mainCarouselOptions={mouseDrag:false,lazyLoad:true,nav:true,loop:true,items:1,navText:MA.utils.carouselNavText(),responsive:{0:{dots:true},1020:{dots:false}},startPosition:selectedIndex,slideSpeed:2000};var thumbnailsCarouselOptions={lazyLoad:true,mouseDrag:false,slideBy:1,dots:false,margin:10,stagePadding:10,items:$thumbnailImages.length,smartSpeed:200,slideSpeed:500};$mainCarousel.on('changed.owl.carousel',function(e){var count=e.item.count;var current=(e.item.index+1)-e.relatedTarget._clones.length / 2;if(current<=0){current=count;}
if(current>count)Â {current=1;}
$imageGallery.find('span.caption b.count').html(current);$thumbnailsCarousel.find(".owl-item").removeClass("current").eq(current-1).addClass("current");setTimeout(function(){toggleAdultBadge();},1);});$thumbnailsCarousel.on('initialized.owl.carousel',function(){$thumbnailsCarousel.find(".owl-item").removeClass("current").eq(selectedIndex).addClass("current");$imageGallery.find('span.caption').html('Image <b class="count">'+(selectedIndex+1)+'</b> of <b>'+$imageGallery.data('totalItems')+'</b>');});$thumbnailsCarousel.on('changed.owl.carousel',function(){$mainCarousel.data('owl.carousel').to(selectedIndex,100,true);});$thumbnailsCarousel.on("click",".owl-item",function(e){$mainCarousel.data('owl.carousel').to($(this).index(),300,true);e.preventDefault();});function init(){try{zE.hide();}catch(e){}
$('html').addClass('show-gallery');$imageGallery.show();$mainCarousel.owlCarousel(mainCarouselOptions);$thumbnailsCarousel.owlCarousel(thumbnailsCarouselOptions);}
function destroy(){$mainCarousel.trigger('destroy.owl.carousel');$thumbnailsCarousel.trigger('destroy.owl.carousel');}
function closeGallery(){$imageGallery.hide();$(document).off('keydown.ImageGallery');$('html').removeClass('show-gallery');$adultBadge.removeClass('current');destroy();try{zE.show();}catch(e){}}
function toggleAdultBadge(){var $activeMainImage=$mainCarousel.find('div.owl-item.active > span.image');if($activeMainImage.hasClass('adult')){$adultBadge.addClass('current');}else{$adultBadge.removeClass('current');}}
$(document).on('keydown.ImageGallery',function(e){if(e.keyCode===37){$mainCarousel.trigger('prev.owl.carousel');}else if(e.keyCode===39){$mainCarousel.trigger('next.owl.carousel');}else if(e.keyCode===27){closeGallery();}});$(document).on('click','div.image-gallery .title a',function(e){e.preventDefault();closeGallery();});$(document).on('click','img.show-preview',function(){closeGallery();});return{init:init,destroy:destroy,closeGallery:closeGallery};};