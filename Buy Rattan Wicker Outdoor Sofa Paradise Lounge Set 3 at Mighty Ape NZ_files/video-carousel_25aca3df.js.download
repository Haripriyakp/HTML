MA.VideoThumbsCarousel=function(slider,playerId){'use strict';var $videoThumbsCarousel=$(slider);var youtubePlayer;function init(gapi){var videoIds=[];$videoThumbsCarousel.find('div.thumb-item[data-youtube-id]').each(function(){videoIds.push($(this).data('youtubeId'));});gapi.client.request({'path':'https://www.googleapis.com/youtube/v3/videos?part=snippet&id='+videoIds.join(','),}).then(function(resp){for(var i=0;i<resp.result.items.length;i++){var $thumbContainer=$videoThumbsCarousel.find('div.thumb-item[data-youtube-id='+resp.result.items[i].id+']');$thumbContainer.find('h3').text(resp.result.items[i].snippet.title);$thumbContainer.find('img.video-thumb').attr('src',resp.result.items[i].snippet.thumbnails.medium.url);}
renderPlayer();renderCarousel();},function(reason){console.log(reason.result.error.message);});}
function renderCarousel(){if($videoThumbsCarousel.find('div.thumb-item').length<2){$videoThumbsCarousel.hide();return;}
$videoThumbsCarousel.owlCarousel({lazyLoad:true,mouseDrag:false,nav:true,dots:false,navText:MA.utils.carouselNavText(),margin:10,responsive:{0:{items:1,margin:10},320:{items:2,margin:10},530:{items:3,margin:10},700:{items:4,margin:10},1020:{items:5,margin:20,stagePadding:0}},slideBy:'page',items:$videoThumbsCarousel.find('div.thumb-item').length,stagePadding:10,smartSpeed:125});$videoThumbsCarousel.find('div.owl-item').first().addClass('current');$videoThumbsCarousel.on('click','div.owl-item',function(e){$(this).siblings().removeClass('current');$(this).addClass('current');youtubePlayer.loadVideoById($(this).find('div.thumb-item').data('youtubeId'));});}
function renderPlayer(){var videoId=$videoThumbsCarousel.find('div.thumb-item').first().data('youtubeId');var playerConfig={};if(Modernizr.mq('(max-width: 480px)')){playerConfig={enablejsapi:1,rel:0,controls:0,showinfo:0,modestbranding:1,autohide:1}}else{playerConfig={enablejsapi:1,rel:0,controls:1}}
youtubePlayer=new YT.Player(playerId,{videoId:videoId,playerVars:playerConfig});}
return{init:init};};